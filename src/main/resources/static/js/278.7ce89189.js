"use strict";(self["webpackChunktext_generation_system"]=self["webpackChunktext_generation_system"]||[]).push([[278],{1278:function(e,r,a){a.r(r),a.d(r,{default:function(){return p}});var s=a(6768),l=a(144),o=a(1219),d=a(4249),n=a(2549);const t={class:"change-password-container"},u={class:"password-content"};var w={__name:"ChangePassword",setup(e){const r=(0,d.Pj)(),a=(0,l.KR)(!1),w=(0,l.KR)(null),c=(0,l.Kh)({oldPassword:"",newPassword:"",confirmPassword:""}),i=(e,r,a)=>{""===r?a(new Error("请再次输入新密码")):r!==c.newPassword?a(new Error("两次输入的密码不一致")):a()},p={oldPassword:[{required:!0,message:"请输入当前密码",trigger:"blur"},{min:6,message:"密码长度不能少于6个字符",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,message:"密码长度不能少于6个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{validator:i,trigger:"blur"}]},m=async()=>{w.value&&await w.value.validate((async e=>{if(e){a.value=!0;try{const e=r.state.user.id,a=await(0,n.f3)(e,{oldPassword:c.oldPassword,newPassword:c.newPassword});a.success?(o.nk.success("密码修改成功"),g()):o.nk.error(a.message||a.error||"密码修改失败")}catch(s){console.error("密码修改失败:",s),o.nk.error(s.response?.data?.error||"密码修改失败")}finally{a.value=!1}}}))},g=()=>{w.value&&w.value.resetFields()};return(e,r)=>{const l=(0,s.g2)("el-input"),o=(0,s.g2)("el-form-item"),d=(0,s.g2)("el-button"),n=(0,s.g2)("el-form"),i=(0,s.g2)("el-card");return(0,s.uX)(),(0,s.CE)("div",t,[(0,s.bF)(i,{class:"password-card"},{header:(0,s.k6)((()=>r[3]||(r[3]=[(0,s.Lk)("div",{class:"card-header"},[(0,s.Lk)("span",null,"修改密码")],-1)]))),default:(0,s.k6)((()=>[(0,s.Lk)("div",u,[(0,s.bF)(n,{ref_key:"passwordFormRef",ref:w,model:c,rules:p,"label-width":"120px",class:"password-form"},{default:(0,s.k6)((()=>[(0,s.bF)(o,{label:"当前密码",prop:"oldPassword"},{default:(0,s.k6)((()=>[(0,s.bF)(l,{modelValue:c.oldPassword,"onUpdate:modelValue":r[0]||(r[0]=e=>c.oldPassword=e),type:"password",placeholder:"请输入当前密码","show-password":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,s.bF)(o,{label:"新密码",prop:"newPassword"},{default:(0,s.k6)((()=>[(0,s.bF)(l,{modelValue:c.newPassword,"onUpdate:modelValue":r[1]||(r[1]=e=>c.newPassword=e),type:"password",placeholder:"请输入新密码","show-password":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,s.bF)(o,{label:"确认新密码",prop:"confirmPassword"},{default:(0,s.k6)((()=>[(0,s.bF)(l,{modelValue:c.confirmPassword,"onUpdate:modelValue":r[2]||(r[2]=e=>c.confirmPassword=e),type:"password",placeholder:"请再次输入新密码","show-password":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,s.bF)(o,null,{default:(0,s.k6)((()=>[(0,s.bF)(d,{type:"primary",loading:a.value,onClick:m},{default:(0,s.k6)((()=>r[4]||(r[4]=[(0,s.eW)(" 确认修改 ")]))),_:1},8,["loading"]),(0,s.bF)(d,{onClick:g},{default:(0,s.k6)((()=>r[5]||(r[5]=[(0,s.eW)("重置")]))),_:1})])),_:1})])),_:1},8,["model"])])])),_:1})])}}},c=a(1241);const i=(0,c.A)(w,[["__scopeId","data-v-24a73f1c"]]);var p=i}}]);