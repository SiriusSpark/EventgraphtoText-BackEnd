"use strict";(self["webpackChunktext_generation_system"]=self["webpackChunktext_generation_system"]||[]).push([[978],{288:function(e,t,l){l.d(t,{CW:function(){return r},Kl:function(){return i},VB:function(){return u},Yh:function(){return o},hs:function(){return a}});var n=l(5720);function a(){return(0,n.A)({url:"/api/text_styles",method:"get"})}function r(e){return(0,n.A)({url:`/api/text_styles/${e}`,method:"get"})}function u(e){return(0,n.A)({url:"/api/text_styles",method:"post",data:e})}function o(e,t){return(0,n.A)({url:`/api/text_styles/${e}`,method:"put",data:t})}function i(e){return(0,n.A)({url:`/api/text_styles/${e}`,method:"delete"})}},4978:function(e,t,l){l.r(t),l.d(t,{default:function(){return v}});l(4114);var n=l(6768),a=l(4232),r=l(144),u=l(1387),o=l(1219),i=l(164),s=l(288);const c={class:"text-style-edit-container"},d={class:"page-header"};var p={__name:"edit",setup(e){const t=(0,u.lq)(),l=(0,u.rd)(),p=(0,r.KR)(null),m=(0,r.KR)(!1),f=(0,r.KR)(!1),v=(0,r.KR)(!1),g=(0,n.EW)((()=>void 0!==t.params.id)),y=(0,n.EW)((()=>t.params.id)),k=(0,r.Kh)({name:"",description:""}),h={name:[{required:!0,message:"请输入风格名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],description:[{required:!0,message:"请输入风格描述",trigger:"blur"}]},_=async()=>{if(g.value){m.value=!0;try{console.log("获取风格详情:",y.value);const e=await(0,s.CW)(y.value);console.log("风格详情数据:",e),k.name=e.name||"",k.description=e.description||""}catch(e){console.error("获取风格详情失败:",e),o.nk.error("获取风格详情失败")}finally{m.value=!1}}},b=()=>{p.value.validate((async e=>{if(e){f.value=!0;try{g.value?(await(0,s.Yh)(y.value,{name:k.name,description:k.description}),o.nk.success("更新成功")):(await(0,s.VB)({name:k.name,description:k.description}),o.nk.success("创建成功")),l.push("/text-style/list")}catch(t){console.error("保存风格失败:",t),o.nk.error("保存风格失败")}finally{f.value=!1}}}))},x=async()=>{try{await i.s.confirm("确定要删除该风格吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),v.value=!0,await(0,s.Kl)(y.value),o.nk.success("删除成功"),l.push("/text-style/list")}catch(e){"cancel"!==e&&(console.error("删除风格失败:",e),o.nk.error("删除风格失败"))}finally{v.value=!1}},w=()=>{l.push("/text-style/list")};return(0,n.sV)((()=>{_()})),(e,t)=>{const l=(0,n.g2)("el-input"),r=(0,n.g2)("el-form-item"),u=(0,n.g2)("el-button"),o=(0,n.g2)("el-form"),i=(0,n.gN)("loading");return(0,n.uX)(),(0,n.CE)("div",c,[(0,n.Lk)("div",d,[(0,n.Lk)("h2",null,(0,a.v_)(g.value?"编辑风格":"创建风格"),1)]),(0,n.bo)(((0,n.uX)(),(0,n.Wv)(o,{ref_key:"formRef",ref:p,model:k,rules:h,"label-width":"100px",class:"style-form"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{label:"风格名称",prop:"name"},{default:(0,n.k6)((()=>[(0,n.bF)(l,{modelValue:k.name,"onUpdate:modelValue":t[0]||(t[0]=e=>k.name=e),placeholder:"请输入风格名称"},null,8,["modelValue"])])),_:1}),(0,n.bF)(r,{label:"描述",prop:"description"},{default:(0,n.k6)((()=>[(0,n.bF)(l,{modelValue:k.description,"onUpdate:modelValue":t[1]||(t[1]=e=>k.description=e),type:"textarea",rows:3,placeholder:"请输入风格描述"},null,8,["modelValue"])])),_:1}),(0,n.bF)(r,null,{default:(0,n.k6)((()=>[(0,n.bF)(u,{type:"primary",onClick:b,loading:f.value},{default:(0,n.k6)((()=>t[2]||(t[2]=[(0,n.eW)("保存")]))),_:1},8,["loading"]),(0,n.bF)(u,{onClick:w},{default:(0,n.k6)((()=>t[3]||(t[3]=[(0,n.eW)("取消")]))),_:1}),g.value?((0,n.uX)(),(0,n.Wv)(u,{key:0,type:"danger",onClick:x,loading:v.value},{default:(0,n.k6)((()=>t[4]||(t[4]=[(0,n.eW)("删除")]))),_:1},8,["loading"])):(0,n.Q3)("",!0)])),_:1})])),_:1},8,["model"])),[[i,m.value]])])}}},m=l(1241);const f=(0,m.A)(p,[["__scopeId","data-v-10152398"]]);var v=f}}]);